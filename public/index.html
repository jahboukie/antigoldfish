<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AntiGoldfishMode — Local‑Only, Air‑Gapped Memory CLI</title>
  <meta name="description" content="Transparent, air‑gapped local memory for code. Traceable commands, signed & checksummed exports, zero egress. MIT / honor‑system." />
  <style>
    :root {
      color-scheme: light dark;
      --bg: #ffffff;
      --text: #0f172a;
      --muted: #475569;
      --muted-soft: #64748b;
      --header-bg: #0f172a;
      --header-text: #ffffff;
      --border: #e2e8f0;
      --code-bg: #f1f5f9;
      --panel-bg: #ffffff;
      --accent-hover: #f1f5f9;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f172a;
        --text: #f1f5f9;
        --muted: #94a3b8;
        --muted-soft: #64748b;
        --header-bg: #0f172a;
        --header-text: #ffffff;
        --border: #334155;
        --code-bg: #1e293b;
        --panel-bg: #1e293b;
        --accent-hover: #1e293b;
      }
    }
    body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin:0; line-height:1.45; color:var(--text); background:var(--bg); }
    header { background:var(--header-bg); color:var(--header-text); padding:56px 18px 48px; }
    h1 { font-size:2.1rem; margin:0 0 12px; font-weight:600; letter-spacing:.5px; }
    .tagline { margin:0 0 18px; font-size:1rem; max-width:780px; }
    .prove { font-family:monospace; background:var(--code-bg); color:var(--text); padding:4px 8px; border-radius:6px; font-size:.85rem; display:inline-block; }
    a.cta { display:inline-block; background:var(--panel-bg); color:var(--text); padding:10px 18px; border-radius:8px; text-decoration:none; font-weight:600; margin-right:10px; border:1px solid var(--border); }
    a.cta:hover { background:var(--accent-hover); }
    main { max-width:940px; margin:0 auto; padding:40px 18px 64px; }
    h2 { margin-top:48px; font-size:1.4rem; letter-spacing:.3px; }
    h2:first-of-type { margin-top:8px; }
    ul,ol { padding-left:20px; }
    code { background:var(--code-bg); padding:2px 6px; border-radius:4px; font-size:.85rem; }
    table { border-collapse:collapse; width:100%; margin:16px 0; font-size:.85rem; }
    th,td { border:1px solid var(--border); padding:6px 8px; text-align:left; }
    th { background:var(--code-bg); }
    .note { font-size:.75rem; color:var(--muted-soft); margin-top:4px; }
    .list-tight li { margin-bottom:4px; }
    .muted { color:var(--muted); font-size:.85rem; }
    .two-col { display:grid; grid-template-columns:1fr 1fr; gap:28px; }
  .cta-row { margin-top:18px; }
  .support-note { margin-top:10px; font-size:.72rem; color:var(--muted-soft); max-width:760px; }
    .footer-note { margin-top:4px; }
    @media (max-width:760px){ .two-col { grid-template-columns:1fr; } header { padding:44px 18px 40px;} a.cta { margin-bottom:8px; } }
    footer { padding:32px 18px; text-align:center; font-size:.75rem; color:var(--muted-soft); border-top:1px solid var(--border); }
    .roadmap-list li { margin-bottom:2px; }
    .section-desc { margin-top:4px; color:var(--muted); font-size:.85rem; }
  </style>
</head>
<body>
  <header>
    <h1>AntiGoldfishMode</h1>
    <p class="tagline">Local‑only, air‑gapped memory for codebases that cannot leave the machine. Every action is traceable. Exports are signed & checksummed. No telemetry. Verify zero egress at any moment.</p>
    <div class="prove">agm prove-offline</div>
    <div class="cta-row">
      <a class="cta" href="https://github.com/jahboukie/antigoldfish">GitHub</a>
      <a class="cta" href="https://github.com/sponsors/jahboukie">Sponsor (Honor‑System)</a>
      <a class="cta" href="https://github.com/sponsors/jahboukie">Support Development</a>
    </div>
    <p class="support-note">Sponsorship is voluntary. All core features (signing, checksums, policy, receipts, export/import) are MIT‑licensed and fully functional without payment.</p>
  </header>
  <main>
    <h2>Implemented (v1.9.0)</h2>
    <div class="two-col">
      <div>
        <strong>Core Engine</strong>
        <ul class="list-tight">
          <li>SQLite-based persistent memory</li>
          <li>Local-only vector embeddings (zero egress)</li>
          <li>Tree-sitter AST-based code chunking</li>
          <li>Hybrid search (keyword + vector)</li>
        </ul>
        <strong>Integrity &amp; Export</strong>
        <ul class="list-tight">
          <li>Signed + checksummed <code>.agmctx</code> exports</li>
          <li>Zipped bundle support (<code>--zip</code>)</li>
          <li>Delta exports to reduce duplication (<code>--delta</code>)</li>
          <li>Provenance data in export manifests</li>
        </ul>
        <strong>Policy &amp; Security</strong>
        <ul class="list-tight">
          <li>Zero-trust policy engine (command &amp; path rules)</li>
          <li>Enforced signing (<code>forceSignedExports</code>)</li>
          <li>Time-scoped trust tokens for temporary bypass</li>
          <li>Full key lifecycle management (rotate, prune, etc.)</li>
        </ul>
      </div>
      <div>
        <strong>Transparency &amp; Auditing</strong>
        <ul class="list-tight">
          <li>Trace/plan/mirror flags for all commands</li>
          <li>Per-command JSON receipts with digests</li>
          <li>Append-only command journal (.jsonl)</li>
          <li>Verifiable zero-egress (<code>agm prove-offline</code>)</li>
        </ul>
        <strong>Diagnostics &amp; Maintenance</strong>
        <ul class="list-tight">
          <li>Database doctor (<code>db-doctor</code>) for integrity checks</li>
          <li>Health and vector status commands</li>
          <li>Garbage collection for stale data (<code>gc</code>)</li>
          <li>Robust regression test suite</li>
        </ul>
      </div>
    </div>

    <h2>Integrity: Import Exit Codes</h2>
    <table>
      <thead><tr><th>Code</th><th>Meaning</th></tr></thead>
      <tbody>
        <tr><td>0</td><td>All verification passed</td></tr>
        <tr><td>2</td><td>Unsigned bundle blocked (policy requires signature)</td></tr>
        <tr><td>3</td><td>Invalid signature</td></tr>
        <tr><td>4</td><td>Checksum mismatch (tamper/corrupt)</td></tr>
      </tbody>
    </table>
    <p class="muted">Checksums are verified before signature to surface tamper early.</p>

    <h2>Quick Start</h2>
    <ol>
      <li><code>npm i -g antigoldfishmode</code></li>
      <li><code>agm init</code></li>
      <li><code>agm index-code --path src --symbols</code></li>
      <li><code>agm search-code "auth middleware" --hybrid --preview 3</code></li>
      <li><code>agm export-context --out ./ctx.agmctx --type code --zip --sign</code></li>
    </ol>
    <p class="note">See docs/airgapped.md for bundle format & verification details.</p>

    <h2>Roadmap (Post-1.9.0)</h2>
    <ul class="roadmap-list">
      <li>High-performance ANN acceleration (Faiss, etc.)</li>
      <li>Import preview (merge/diff view)</li>
      <li>Point-in-time memory replay (time-travel)</li>
      <li>Multi-key signature verification (trust chain)</li>
      <li>Privacy-preserving usage nudges</li>
    </ul>
    <p class="muted">These features are planned for future releases.</p>

    <h2>Upgrade to Pro (Honor-System)</h2>
    <p class="section-desc">Pro features are available via an honor-system sponsorship. They focus on advanced code analysis, workflow automation, and stricter security controls for professional and team environments.</p>
    <table>
      <thead><tr><th>Pro Feature</th><th>Benefit</th></tr></thead>
      <tbody>
        <tr>
          <td><strong>AST-Powered Code Indexing</strong></td>
          <td>Uses Tree-sitter for precise, syntax-aware chunking of code (TS/JS, Python, etc.). This provides far more accurate search results and context quality than the standard heuristic-based indexing.</td>
        </tr>
        <tr>
          <td><strong>Enforced Supply Chain Security</strong></td>
          <td>Set strict, non-bypassable policies like <code>forceSignedExports</code> (prevent unsigned code from leaving) and <code>requireSignedContext</code> (block untrusted imports). Essential for corporate and team environments.</td>
        </tr>
        <tr>
          <td><strong>Automated Signing Workflows</strong></td>
          <td>Enable <code>signExports</code> in your policy to make cryptographic signing the default behavior for all exports. Reduces friction and human error, improving security posture.</td>
        </tr>
      </tbody>
    </table>

    <h2>Honor‑System Funding</h2>
    <p>All core capability is MIT‑licensed. No license checks, no telemetry, no crippled paths. Sponsorship funds maintenance, performance upgrades (Tree‑sitter & ANN), and better tooling (dashboards, diff preview). If it saves you time, consider supporting.</p>

    <h2>Verification & Docs</h2>
    <ul class="list-tight">
      <li><a href="https://github.com/jahboukie/antigoldfish/blob/master/SECURITY.md">SECURITY.md</a> – zero‑egress posture & policy surface</li>
      <li><a href="https://github.com/jahboukie/antigoldfish/blob/master/REPRODUCIBLE_BUILDS.md">REPRODUCIBLE_BUILDS.md</a> – build determinism notes</li>
      <li><a href="https://github.com/jahboukie/antigoldfish/blob/master/docs/airgapped.md">Air‑gapped export/import</a></li>
      <li><a href="https://github.com/jahboukie/antigoldfish/blob/master/docs/receipts.md">Receipts schema</a></li>
      <li><a href="https://github.com/jahboukie/antigoldfish/blob/master/README.md">Project README</a></li>
    </ul>
    <p class="note">Pull requests improving reproducibility, verification coverage, or docs are welcome.</p>

    <h2>What We Don't Do</h2>
    <ul class="list-tight">
      <li>No cloud or hosted service layer</li>
      <li>No remote code execution features</li>
      <li>No usage tracking / analytics</li>
      <li>No gating of security features behind paywalls</li>
    </ul>
  </main>
  <footer>
  <div>AntiGoldfishMode <span class="version-marker">v1.9.0</span> • MIT License • © 2025</div>
  <div class="footer-note">Verify offline anytime: <code>agm prove-offline</code></div>
  </footer>
</body>
</html>